<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work List</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="worklist.css"> 
</head>
<body>
    <header>
        <div class="logo-name">logo & name</div>
        <nav>
            <a href="#">Home</a>
            <a href="#">About us</a>
            <a href="#">Contact</a>
            <a href="#" class="logout">Log out</a>
            <div class="user-icon">&#128100;</div>
            <div class="menu">&#9776;</div>
        </nav>
    </header>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2 sidebar">
                <a href="#" class="icon" ><img src="add-new user.png" width="50px" height="50px">
                    <br>
                    Add new user
                </a><br>
                <a href="#" class="icon"><img src="contractor.png" width="50px" height="50px">
                    <br>
                    Contractors
                </a> <br>
                <a href="#" class="icon"><img src="checklist.png" width="50px" height="50px">
                    <br>
                    Work list
                </a> <br>
                <a href="#" class="icon"><img src="engineer.png" width="50px" height="50px"><br>
                    Engineers
                </a> <br>

                <a href="#" class="icon"><img src="risk-management.png" width="50px" height="50px">
                    <br>
                    Manage
                </a> <br>
            </div>

            <main role="main" class="col-md-10 ml-sm-auto">
                
                <div class="content">
                    <h1 class="h2">Work list</h1>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1"><i class="fas fa-keyboard"></i></span>
                        </div>
                        
                        <div class="search-container">
                            <input type="text" placeholder="Enter here" class="search-input">
                            <button type="submit" class="search-button">
                              <i class="fas fa-search"></i> </button>
                          </div>
                    </div>

                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th scope="col">Roc No.</th>
                                <th scope="col">Ward No. </th>
                                <th scope="col">Work Name</th>
                                <th scope="col">Contractor ID</th>
                                <th scope="col">Nature of Work</th>
                                <th scope="col">Work Date</th>
                                <th scope="col">Measurement Date</th>
                                <th scope="col">Bill Amount</th>
                                <th scope="col">Part or Final</th>
                                <th scope="col">Work Status</th>
                                <th scope="col">AE name</th>

                            </tr>
                        </thead>
                        <tbody id="work-list">
                            <div class="container">
                                        <div class="form-group" > 	<!--		Show Numbers Of Rows 		-->
                                             <select class  ="form-control" name="state" id="maxRows">
                                                 <option value="5000">Show ALL Rows</option>
                                                 <option value="5">5</option>
                                                 <option value="10">10</option>
                                                 <option value="15">15</option>
                                                 <option value="20">20</option>
                                                 <option value="50">50</option>
                                                 <option value="70">70</option>
                                                 <option value="100">100</option>
                                                </select>
                                          </div>
                                          
                                          <tbody>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>
                                            <tr>
                                                <td>123</td>
                                                <td>123</td>
                                                <td>abc</td>
                                                <td>xyz</td>
                                                <td>xyz</td>
                                                <td>24/09/2024</td>
                                                <td>05/09/2024</td>
                                                <td>10</td>
                                                <td>Part</td>
                                                <td>In-progress</td>
                                                <td>aabb</td>
                                                
                                            </tr>



                        <!-- <table class="table table-striped table-class" id= "table-id">
                           -->
                          
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                    <!--		Start Pagination -->
			<!-- Add a container for pagination -->
            <div class="pagination-container">
				<nav>
				  <ul class="pagination">
            
            <li data-page="prev">
								     <span> &lt; <span class="sr-only">(current)</span></span>
								    </li>
				   <!--	Here the JS Function Will Add the Rows -->
        <li data-page="1" class="active">								  
            <span>1<span class="sr-only">(current)</span></span>				
    	</li><li data-page="2" class="">	
            <span>2<span class="sr-only">(current)</span></span>			
    	</li><li data-page="3">								  
            <span>3<span class="sr-only">(current)</span></span>					
		</li><li data-page="4">				
            <span>4<span class="sr-only">(current)</span></span>			
    	</li><li data-page="5">								
            <span>5<span class="sr-only">(current)</span></span>	
    	</li><li data-page="6" style="display: none;">			
            <span>6<span class="sr-only">(current)</span></span>			
    	</li><li data-page="7" style="display: none;">		
            <span>7<span class="sr-only">(current)</span></span>	
    	</li><li data-page="8" style="display: none;">
            <span>8<span class="sr-only">(current)</span></span>								
        </li><li data-page="9" style="display: none;">		
            <span>9<span class="sr-only">(current)</span></span>	
    	</li><li data-page="10" style="display: none;">			
            <span>10<span class="sr-only">(current)</span></span>								
        </li><li data-page="11" style="display: none;">								  
            <span>11<span class="sr-only">(current)</span></span>				
        </li><li data-page="12" style="display: none;">								
            <span>12<span class="sr-only">(current)</span></span>								
        </li><li data-page="13" style="display: none;">								  
            <span>13<span class="sr-only">(current)</span></span>								
        </li><li data-page="14" style="display: none;">								  
            <span>14<span class="sr-only">(current)</span></span>								
        </li><li data-page="15" style="display: none;">								  
            <span>15<span class="sr-only">(current)</span></span>								
        </li><li data-page="16" style="display: none;">								  
								    </li>
				  </ul>
				</nav>
			</div>

</div> <!-- 		End of Container -->

                </div>
            </main>
        </div>
    </div>

    <footer>
        <p>&copy; Tender Management. All rights reserved.</p>
    </footer>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
         getPagination('#table-id');
					//getPagination('.table-class');
					//getPagination('table');

		  /*					PAGINATION 
		  - on change max rows select options fade out all rows gt option value mx = 5
		  - append pagination list as per numbers of rows / max rows option (20row/5= 4pages )
		  - each pagination li on click -> fade out all tr gt max rows * li num and (5*pagenum 2 = 10 rows)
		  - fade out all tr lt max rows * li num - max rows ((5*pagenum 2 = 10) - 5)
		  - fade in all tr between (maxRows*PageNum) and (maxRows*pageNum)- MaxRows 
		  */
		 

// Function to get pagination
function getPagination(table) {
    var lastPage = 1;

    $('#maxRows')
        .on('change', function(evt) {
            lastPage = 1;
            $('.pagination')
                .find('li')
                .slice(1, -1)
                .remove();
            var trnum = 0; 
            var maxRows = parseInt($(this).val()); 

            if (maxRows == 5000) {
                $('.pagination').hide();
            } else {
                $('.pagination').show();
            }

            var totalRows = $(table + ' tbody tr').length; 
            $(table + ' tr:gt(0)').each(function() {
                trnum++; 
                if (trnum > maxRows) {
                    $(this).hide(); 
                }
                if (trnum <= maxRows) {
                    $(this).show();
                } 
            }); 
            if (totalRows > maxRows) {
                var pagenum = Math.ceil(totalRows / maxRows); 
                for (var i = 1; i <= pagenum; ) {
                    $('.pagination #prev')
                        .before(
                            '<li data-page="' +
                            i +
                            '">\
								  <span>' +
                            i++ +
                            '<span class="sr-only">(current)</span></span>\
								</li>'
                        )
                        .show();
                } 
            } 
            $('.pagination [data-page="1"]').addClass('active'); 
            $('.pagination li').on('click', function(evt) {
                evt.stopImmediatePropagation();
                evt.preventDefault();
                var pageNum = $(this).attr('data-page'); 

                var maxRows = parseInt($('#maxRows').val()); 

                if (pageNum == 'prev') {
                    if (lastPage == 1) {
                        return;
                    }
                    pageNum = --lastPage;
                }
                if (pageNum == 'next') {
                    if (lastPage == $('.pagination li').length - 2) {
                        return;
                    }
                    pageNum = ++lastPage;
                }

                lastPage = pageNum;
                var trIndex = 0; 
                $('.pagination li').removeClass('active'); 
                $('.pagination [data-page="' + lastPage + '"]').addClass('active'); 
                $(table + ' tr:gt(0)').each(function() {
                    trIndex++; 
                    if (
                        trIndex > maxRows * pageNum ||
                        trIndex <= maxRows * pageNum - maxRows
                    ) {
                        $(this).hide();
                    } else {
                        $(this).show();
                    } 
                }); 
                limitPagging();
            }); 
            limitPagging();
        })
        .val(5)
        .change();

    // end of on select change

    // END OF PAGINATION
}

function limitPagging(){
    if($('.pagination li').length > 7 ){
        if( $('.pagination li.active').attr('data-page') <= 3 ){
            $('.pagination li:gt(5)').hide();
            $('.pagination li:lt(5)').show();
            $('.pagination [data-page="next"]').show();
        }if ($('.pagination li.active').attr('data-page') > 3){
            $('.pagination li:gt(0)').hide();
            $('.pagination [data-page="next"]').show();
            for( let i = ( parseInt($('.pagination li.active').attr('data-page'))  -2 )  ; i <= ( parseInt($('.pagination li.active').attr('data-page'))  + 2 ) ; i++ ){
                $('.pagination [data-page="'+i+'"]').show();

            }

        }
    }
}

// Call the getPagination function
getPagination('#table-id');

        // API call to load data
$.ajax({
    type: "GET",
    url: "https://api.example.com/work-list", // Replace with your API URL
    success: function(data) {
        $.each(data, function(index, item) {
            $("#work-list").append("<tr><td>" + item.id + "</td><td>" + item.work_id + "</td><td>" + item.work_name + "</td>< td>" + item.description + "</td><td>" + item.status + "</td></tr>");
        });
        getPagination('#table-id'); // Call the getPagination function after data is loaded
    }
});
    </script>
</body>
</html>